<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML Style Editor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        .sidebar {
            width: 300px;
            background: #2c3e50;
            color: white;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 2px 0 5px rgba(0,0,0.1);
        }

        .sidebar h2 {
            margin-bottom: 15px;
            font-size: 16px;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
            margin-top: 20px;
        }

        .sidebar h2:first-child {
            margin-top: 0;
        }

        .file-controls {
            margin-bottom: 20px;
        }

        .file-input-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
            margin-bottom: 10px;
        }

        .file-input-wrapper input[type=file] {
            position: absolute;
            left: -9999px;
        }

        .file-input-label {
            display: block;
            padding: 10px;
            background: #3498db;
            color: white;
            text-align: center;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .file-input-label:hover {
            background: #2980b9;
        }

        .style-btn {
            width: 100%;
            padding: 10px;
            margin-bottom: 8px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
            text-align: left;
            font-weight: 500;
        }

        .style-btn:hover {
            transform: translateX(5px);
        }

        .style-btn.small-text {
            font-size: 11px;
            padding: 8px;
        }

        .btn-save {
            background: #27ae60;
            color: white;
            margin-top: 20px;
        }

        .editor-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
        }

        .toolbar {
            background: #34495e;
            padding: 15px 20px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-content {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            line-height: 1.6;
        }

        /* –°–¢–ò–õ–ò –î–õ–Ø –ü–†–ï–î–ü–†–û–°–ú–û–¢–†–ê */
        
        /* 1. Highlighted Oval 3D */
        .gold-highlighted-oval-3d {
            background: linear-gradient(135deg, #f7971e 0%, #ffd200 100%);
            padding: 3px 12px;
            border-radius: 20px;
            color: #333;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(247, 151, 30, 0.3);
            display: inline-block;
        }

        .green-highlighted-oval-3d {
            background: linear-gradient(135deg, #a8e063 0%, #56ab2f 100%);
            padding: 3px 12px;
            border-radius: 20px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(86, 171, 47, 0.3);
            display: inline-block;
        }

        .yellow-highlighted-oval-3d {
            background: linear-gradient(135deg, #f9d423 0%, #f5b700 100%);
            padding: 3px 12px;
            border-radius: 20px;
            color: #333;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(249, 212, 35, 0.3);
            display: inline-block;
        }

        .blue-highlighted-oval-3d {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 3px 12px;
            border-radius: 20px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(102, 126, 234, 0.3);
            display: inline-block;
        }

        .red-highlighted-oval-3d {
            background: linear-gradient(135deg, #f85032 0%, #e73827 100%);
            padding: 3px 12px;
            border-radius: 20px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(248, 80, 50, 0.3);
            display: inline-block;
        }

        .pink-highlighted-oval-3d {
            background: linear-gradient(135deg, #ff6ec7 0%, #ff1f8f 100%);
            padding: 3px 12px;
            border-radius: 20px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(255, 110, 199, 0.3);
            display: inline-block;
        }

        .purple-highlighted-oval-3d {
            background: linear-gradient(135deg, #9d50bb 0%, #6e48aa 100%);
            padding: 3px 12px;
            border-radius: 20px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(157, 80, 187, 0.3);
            display: inline-block;
        }

        .teal-highlighted-oval-3d {
            background: linear-gradient(135deg, #38ef7d 0%, #11998e 100%);
            padding: 3px 12px;
            border-radius: 20px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(56, 239, 125, 0.3);
            display: inline-block;
        }

        .orange-highlighted-oval-3d {
            background: linear-gradient(135deg, #fa8c16 0%, #ff6b35 100%);
            padding: 3px 12px;
            border-radius: 20px;
            color: white;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(250, 140, 22, 0.3);
            display: inline-block;
        }

        .silver-highlighted-oval-3d {
            background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);
            padding: 3px 12px;
            border-radius: 20px;
            color: #333;
            font-weight: 500;
            box-shadow: 0 4px 6px rgba(189, 195, 199, 0.3);
            display: inline-block;
        }

        /* 2. Collapsible Section */
        details {
            margin: 15px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
        }

        summary {
            cursor: pointer;
            font-weight: bold;
            padding: 5px;
            background: #f8f9fa;
            border-radius: 3px;
        }

        summary:hover {
            background: #e9ecef;
        }

        details p {
            margin-top: 10px;
        }

        /* 3. Info Boxes */
        .info-box {
            background: #ffeaa7;
            border-left: 4px solid #fdcb6e;
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .info-box p {
            margin: 0;
            color: #2d3436;
        }

        .info-box-info {
            background: #e3f2fd;
            border-left-color: #2196f3;
        }

        .info-box-info p {
            color: #1565c0;
        }

        .info-box-success {
            background: #e8f5e9;
            border-left-color: #4caf50;
        }

        .info-box-success p {
            color: #2e7d32;
        }

        .info-box-warning {
            background: #fff3cd;
            border-left-color: #ff9800;
        }

        .info-box-warning p {
            color: #e65100;
        }

        .info-box-danger {
            background: #ffebee;
            border-left-color: #f44336;
        }

        .info-box-danger p {
            color: #c62828;
        }

        /* 4. Luminous Blocks */
        .luminous-block {
            display: inline-block;
            padding: 4px 12px;
            margin: 0 3px;
            border-radius: 4px;
            font-weight: 600;
            box-shadow: 0 0 10px currentColor;
        }

        .luminous-blue {
            background: rgba(33, 150, 243, 0.2);
            color: #2196f3;
        }

        .luminous-green {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
        }

        .luminous-red {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }

        .luminous-yellow {
            background: rgba(255, 235, 59, 0.3);
            color: #f57f17;
        }

        .luminous-purple {
            background: rgba(156, 39, 176, 0.2);
            color: #9c27b0;
        }

        /* 5. Cyber Glitch */
        .cyber-glitch {
            position: relative;
            display: inline-block;
            font-weight: bold;
            color: #ff0000;
            animation: glitch 1s infinite;
        }

        @keyframes glitch {
            0%, 100% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
        }

        /* 6. Cyber Neon */
        .cyber-neon {
            display: inline-block;
            padding: 5px 15px;
            font-weight: bold;
            text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
            animation: neon-pulse 2s infinite;
        }

        @keyframes neon-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .cyber-neon-pink {
            color: #ff1f8f;
        }

        .cyber-neon-blue {
            color: #00d9ff;
        }

        .cyber-neon-green {
            color: #39ff14;
        }

        .cyber-neon-yellow {
            color: #ffff00;
        }

        .placeholder {
            text-align: center;
            color: #95a5a6;
            padding: 100px 20px;
            font-size: 18px;
        }

        ::selection {
            background: #3498db;
            color: white;
        }

        .status-message {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #27ae60;
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0,0,0.2);
            display: none;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .help-text {
            font-size: 11px;
            margin-bottom: 12px;
            color: #bdc3c7;
            line-height: 1.4;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
        .editor-content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 15px 0;
            display: block;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü */
        .editor-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        .editor-content table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        .editor-content table td {
            padding: 12px;
            border-bottom: 1px solid #e0e0e0;
            background: white;
        }

        .editor-content table tr:hover td {
            background: #f8f9fa;
        }

        .editor-content table tr:last-child td {
            border-bottom: none;
        }

        /* –°–¢–ò–õ–ò –î–õ–Ø –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–û–ì–û –ü–†–û–°–ú–û–¢–†–ê –ú–ê–†–ö–ï–†–û–í –ò –°–ü–ò–°–ö–û–í */
        
        /* –¶–≤–µ—Ç–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã */
        .marker-green {
            background-color: #27ae60; /* –ò–∑—É–º—Ä—É–¥–Ω—ã–π */
            color: white;
            padding: 0px 3px;
            border-radius: 0px;
        }

        .marker-blue {
            background-color: #3498db; /* –ì–æ–ª—É–±–æ–π */
            color: white;
            padding: 0px 3px;
            border-radius: 0px;
        }

        .marker-red {
            background-color: #e74c3c; /* –ö—Ä–∞—Å–Ω—ã–π */
            color: white;
            padding: 0px 3px;
            border-radius: 0px;
        }

        .marker-purple {
            background-color: #8e44ad; /* –§–∏–æ–ª–µ—Ç–æ–≤—ã–π */
            color: white;
            padding: 0px 3px;
            border-radius: 0px;
        }

        .marker-yellow {
            background-color: #f1c40f; /* –ñ–µ–ª—Ç—ã–π (—Å —á–µ—Ä–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞) */
            color: #333;
            padding: 0px 3px;
            border-radius: 0px;
            font-weight: 500;
        }

        .marker-cyan {
            background-color: #1abc9c; /* –ë–∏—Ä—é–∑–æ–≤—ã–π */
            color: white;
            padding: 0px 3px;
            border-radius: 0px;
        }

        .marker-pink {
            background-color: #ff85a2; /* –†–æ–∑–æ–≤—ã–π */
            color: white;
            padding: 2px 5px;
            border-radius: 5px;
        }

        /* –¶–≤–µ—Ç–Ω–∞—è –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ —Å–ø–∏—Å–∫–æ–≤ */
        .custom-list {
            list-style: none; /* –£–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã */
            padding-left: 0;
        }

        .custom-list li {
            position: relative;
            padding-left: 20px; /* –û—Ç—Å—Ç—É–ø –¥–ª—è –º–∞—Ä–∫–µ—Ä–∞ */
            margin-bottom: 5px;
        }

        .list-circle-red li::before {
            content: "\2022"; /* –ö–æ–¥ –¥–ª—è –∫—Ä—É–∂–æ—á–∫–∞ */
            color: #e74c3c; /* –ö—Ä–∞—Å–Ω—ã–π */
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }

        .list-circle-blue li::before {
            content: "\2022";
            color: #3498db; /* –ì–æ–ª—É–±–æ–π */
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }

        .list-circle-green li::before {
            content: "\2022";
            color: #2ecc71; /* –ó–µ–ª–µ–Ω—ã–π */
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }

        .list-diamond-purple li::before {
            content: "\25C6"; /* –ö–æ–¥ –¥–ª—è —Ä–æ–º–±–∞ */
            color: #9b59b6; /* –§–∏–æ–ª–µ—Ç–æ–≤—ã–π */
            font-size: 0.8em; /* –†–æ–º–± –ø–æ–º–µ–Ω—å—à–µ */
            position: absolute;
            left: 0;
        }

        .list-diamond-orange li::before {
            content: "\25C6";
            color: #f39c12; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π */
            font-size: 0.8em;
            position: absolute;
            left: 0;
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 90%;
        }

        .modal-content h3 {
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .modal-content input {
            width: 100%;
            padding: 12px;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .modal-content input:focus {
            outline: none;
            border-color: #3498db;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .modal-btn-ok {
            background: #27ae60;
            color: white;
        }

        .modal-btn-ok:hover {
            background: #229954;
        }

        .modal-btn-cancel {
            background: #95a5a6;
            color: white;
        }

        .modal-btn-cancel:hover {
            background: #7f8c8d;
        }

        .hint-text {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>üìù HTML Style Editor</h2>
        
        <div class="file-controls">
            <div class="file-input-wrapper">
                <input type="file" id="fileInput" accept=".html,.htm">
                <label for="fileInput" class="file-input-label">üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å HTML</label>
            </div>
        </div>

        <p class="help-text">üí° –†–µ–¥–∞–∫—Ç–æ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–µ–Ω: –ø–µ—á–∞—Ç–∞–π—Ç–µ —Ç–µ–∫—Å—Ç, –≤—ã–¥–µ–ª—è–π—Ç–µ –º—ã—à–∫–æ–π –∏ –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ —Å—Ç–∏–ª–∏!</p>

        <h2>üé® 1. –û–≤–∞–ª—å–Ω—ã–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è</h2>
        <button class="style-btn" style="background: linear-gradient(135deg, #f7971e 0%, #ffd200 100%); color: #333;" onclick="applyInlineStyle('gold-highlighted-oval-3d')">üü° Gold</button>
        <button class="style-btn" style="background: linear-gradient(135deg, #a8e063 0%, #56ab2f 100%); color: white;" onclick="applyInlineStyle('green-highlighted-oval-3d')">üü¢ Green</button>
        <button class="style-btn" style="background: linear-gradient(135deg, #f9d423 0%, #f5b700 100%); color: #333;" onclick="applyInlineStyle('yellow-highlighted-oval-3d')">üü° Yellow</button>
        <button class="style-btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;" onclick="applyInlineStyle('blue-highlighted-oval-3d')">üîµ Blue</button>
        <button class="style-btn" style="background: linear-gradient(135deg, #f85032 0%, #e73827 100%); color: white;" onclick="applyInlineStyle('red-highlighted-oval-3d')">üî¥ Red</button>
        <button class="style-btn" style="background: linear-gradient(135deg, #ff6ec7 0%, #ff1f8f 100%); color: white;" onclick="applyInlineStyle('pink-highlighted-oval-3d')">üíó Pink</button>
        <button class="style-btn" style="background: linear-gradient(135deg, #9d50bb 0%, #6e48aa 100%); color: white;" onclick="applyInlineStyle('purple-highlighted-oval-3d')">üü£ Purple</button>
        <button class="style-btn" style="background: linear-gradient(135deg, #38ef7d 0%, #11998e 100%); color: white;" onclick="applyInlineStyle('teal-highlighted-oval-3d')">üî∑ Teal</button>
        <button class="style-btn" style="background: linear-gradient(135deg, #fa8c16 0%, #ff6b35 100%); color: white;" onclick="applyInlineStyle('orange-highlighted-oval-3d')">üü† Orange</button>
        <button class="style-btn" style="background: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%); color: #333;" onclick="applyInlineStyle('silver-highlighted-oval-3d')">‚ö™ Silver</button>

        <h2>üìÇ 2. –°–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç</h2>
        <button class="style-btn" style="background: #7f8c8d; color: white;" onclick="applyCollapsible()">üìã Collapsible Section</button>

        <h2>üì¶ 3. –ò–Ω—Ñ–æ–±–æ–∫—Å—ã</h2>
        <button class="style-btn" style="background: #ffeaa7; color: #2d3436;" onclick="applyInfoBox('')">üì¶ Default (Gold)</button>
        <button class="style-btn" style="background: #e3f2fd; color: #1565c0;" onclick="applyInfoBox('info-box-info')">‚ÑπÔ∏è Info (Blue)</button>
        <button class="style-btn" style="background: #e8f5e9; color: #2e7d32;" onclick="applyInfoBox('info-box-success')">‚úÖ Success (Green)</button>
        <button class="style-btn" style="background: #fff3cd; color: #e65100;" onclick="applyInfoBox('info-box-warning')">‚ö†Ô∏è Warning (Yellow)</button>
        <button class="style-btn" style="background: #ffebee; color: #c62828;" onclick="applyInfoBox('info-box-danger')">üö® Danger (Red)</button>

        <h2>‚ú® 4. Luminous Blocks</h2>
        <button class="style-btn small-text" style="background: rgba(33, 150, 243, 0.2); color: #2196f3;" onclick="applyLuminous('luminous-blue')">üíé Blue</button>
        <button class="style-btn small-text" style="background: rgba(76, 175, 80, 0.2); color: #4caf50;" onclick="applyLuminous('luminous-green')">üíö Green</button>
        <button class="style-btn small-text" style="background: rgba(24, 67, 54, 0.2); color: #f44336;" onclick="applyLuminous('luminous-red')">‚ù§Ô∏è Red</button>
        <button class="style-btn small-text" style="background: rgba(255, 235, 59, 0.3); color: #f57f17;" onclick="applyLuminous('luminous-yellow')">üíõ Yellow</button>
        <button class="style-btn small-text" style="background: rgba(156, 39, 176, 0.2); color: #9c27b0;" onclick="applyLuminous('luminous-purple')">üíú Purple</button>

        <h2>üî• 5. Cyber Glitch</h2>
        <button class="style-btn" style="background: #c0392b; color: white;" onclick="applyCyberGlitch()">‚ö° Glitch Effect</button>

        <h2>üí´ 6. Cyber Neon</h2>
        <button class="style-btn small-text" style="background: #2c3e50; color: #ff1f8f;" onclick="applyCyberNeon('cyber-neon-pink')">üíñ Pink</button>
        <button class="style-btn small-text" style="background: #2c3e50; color: #00d9ff;" onclick="applyCyberNeon('cyber-neon-blue')">üí† Blue</button>
        <button class="style-btn small-text" style="background: #2c3e50; color: #39ff14;" onclick="applyCyberNeon('cyber-neon-green')">üíö Green</button>
        <button class="style-btn small-text" style="background: #2c3e50; color: #ffff00;" onclick="applyCyberNeon('cyber-neon-yellow')">‚ö° Yellow</button>

        <h2>üñçÔ∏è 7. –¶–≤–µ—Ç–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –∏ —Å–ø–∏—Å–∫–∏</h2>
        <div class="combined-palette">
            <div class="marker-palette">
                <button class="style-btn small-text" style="background: #27ae60; color: white;" onclick="applyInlineStyle('marker-green')">üü¢ Green</button>
                <button class="style-btn small-text" style="background: #3498db; color: white;" onclick="applyInlineStyle('marker-blue')">üîµ Blue</button>
                <button class="style-btn small-text" style="background: #e74c3c; color: white;" onclick="applyInlineStyle('marker-red')">üî¥ Red</button>
                <button class="style-btn small-text" style="background: #8e44ad; color: white;" onclick="applyInlineStyle('marker-purple')">üü£ Purple</button>
                <button class="style-btn small-text" style="background: #f1c40f; color: #333;" onclick="applyInlineStyle('marker-yellow')">üü° Yellow</button>
                <button class="style-btn small-text" style="background: #1abc9c; color: white;" onclick="applyInlineStyle('marker-cyan')">üî∑ Cyan</button>
                <button class="style-btn small-text" style="background: #ff85a2; color: white;" onclick="applyInlineStyle('marker-pink')">üíó Pink</button>
            </div>

            <div class="list-palette">
                <button class="style-btn small-text" onclick="applyListStyle('custom-list list-circle-red')">üî¥ –ö—Ä—É–≥–∏ Red</button>
                <button class="style-btn small-text" onclick="applyListStyle('custom-list list-circle-blue')">üîµ –ö—Ä—É–≥–∏ Blue</button>
                <button class="style-btn small-text" onclick="applyListStyle('custom-list list-circle-green')">üü¢ –ö—Ä—É–≥–∏ Green</button>
                <button class="style-btn small-text" onclick="applyListStyle('custom-list list-diamond-purple')">üü£ –†–æ–º–±—ã Purple</button>
                <button class="style-btn small-text" onclick="applyListStyle('custom-list list-diamond-orange')">üü† –†–æ–º–±—ã Orange</button>
            </div>
        </div>

        <h2>üî§ 10. –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</h2>
        <div class="text-color-palette">
            <button class="style-btn small-text" style="background: #000000; color: white;" onclick="applyTextColor('color-black')">‚ö´ –ß–µ—Ä–Ω—ã–π</button>
            <button class="style-btn small-text" style="background: #ffffff; color: black; border: 1px solid #ccc;" onclick="applyTextColor('color-white')">‚ö™ –ë–µ–ª—ã–π</button>
            <button class="style-btn small-text" style="background: #ff0000; color: white;" onclick="applyTextColor('color-red')">üî¥ –ö—Ä–∞—Å–Ω—ã–π</button>
            <button class="style-btn small-text" style="background: #00ff00; color: black;" onclick="applyTextColor('color-green')">üü¢ –ó–µ–ª–µ–Ω—ã–π</button>
            <button class="style-btn small-text" style="background: #0000ff; color: white;" onclick="applyTextColor('color-blue')">üîµ –°–∏–Ω–∏–π</button>
            <button class="style-btn small-text" style="background: #ffff00; color: black;" onclick="applyTextColor('color-yellow')">üü° –ñ–µ–ª—Ç—ã–π</button>
            <button class="style-btn small-text" style="background: #ff00ff; color: white;" onclick="applyTextColor('color-magenta')">.Magenta</button>
            <button class="style-btn small-text" style="background: #00ffff; color: black;" onclick="applyTextColor('color-cyan')">üî∑ –ì–æ–ª—É–±–æ–π</button>
        </div>

        <h2>üî§ 11. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞</h2>
        <div class="heading-type-palette">
            <button class="style-btn" onclick="changeHeadingType('h1')">üè∑Ô∏è H1 (–ó–∞–≥–æ–ª–æ–≤–æ–∫ 1)</button>
            <button class="style-btn" onclick="changeHeadingType('h2')">üè∑Ô∏è H2 (–ó–∞–≥–æ–ª–æ–≤–æ–∫ 2)</button>
            <button class="style-btn" onclick="changeHeadingType('h3')">üè∑Ô∏è H3 (–ó–∞–≥–æ–ª–æ–≤–æ–∫ 3)</button>
            <button class="style-btn" onclick="changeHeadingType('h4')">üè∑Ô∏è H4 (–ó–∞–≥–æ–ª–æ–≤–æ–∫ 4)</button>
            <button class="style-btn" onclick="changeHeadingType('h5')">üè∑Ô∏è H5 (–ó–∞–≥–æ–ª–æ–≤–æ–∫ 5)</button>
            <button class="style-btn" onclick="changeHeadingType('h6')">üè∑Ô∏è H6 (–ó–∞–≥–æ–ª–æ–≤–æ–∫ 6)</button>
            <button class="style-btn" onclick="changeHeadingType('p')">üè∑Ô∏è P (–ü–∞—Ä–∞–≥—Ä–∞—Ñ)</button>
        </div>

        <h2>üñºÔ∏è 12. –í—Å—Ç–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h2>
        <button class="style-btn" style="background: #9b59b6; color: white;" onclick="insertImage()">üì∑ –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É</button>

        <h2>üìä 13. –†–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏</h2>
        <button class="style-btn" style="background: #16a085; color: white;" onclick="convertToTable()">üìä –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É</button>
        <p class="hint-text">–í—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</p>

        <h2>‚Ü©Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
        <button class="style-btn" style="background: #e74c3c; color: white;" onclick="undo()" id="undoBtn">‚Ü©Ô∏è –û—Ç–º–µ–Ω–∏—Ç—å (Ctrl+Z)</button>
        <p class="hint-text" id="historyCount">–ò—Å—Ç–æ—Ä–∏—è: 0 –¥–µ–π—Å—Ç–≤–∏–π</p>

        <button class="style-btn btn-save" onclick="saveFile()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å HTML</button>
        
        <style>
            .combined-palette {
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            
            .marker-palette, .list-palette {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 5px;
            }
            
            .marker-palette .style-btn, .list-palette .style-btn {
                margin-bottom: 5px;
                padding: 6px;
                font-size: 10px;
            }
        </style>
    </div>

    <div class="editor-area">
        <div class="toolbar">
            <div class="current-file" id="currentFile">–§–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω</div>
            <div style="font-size: 12px; color: #bdc3c7;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π —Ä–µ–∂–∏–º</div>
        </div>
        <div class="editor-content" id="editorContent" contenteditable="true">
            <div class="placeholder">
                üëÜ –ó–∞–≥—Ä—É–∑–∏—Ç–µ HTML-—Ñ–∞–π–ª –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã<br>
                –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞—á–Ω–∏—Ç–µ –ø–µ—á–∞—Ç–∞—Ç—å –∑–¥–µ—Å—å!<br><br>
                
                <h2>–ü—Ä–∏–º–µ—Ä—ã —Å—Ç–∏–ª–µ–π:</h2>
                
                <p>–ó–¥–µ—Å—å –º—ã –≤–∏–¥–∏–º, –∫–∞–∫ <span class="marker-green">–≤–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏</span>
                –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–¥–µ–ª–µ–Ω—ã –∑–µ–ª–µ–Ω—ã–º, –∞ <span class="marker-red">–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è</span> ‚Äî –∫—Ä–∞—Å–Ω—ã–º.
                –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ <span class="marker-purple">—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –º–∞—Ä–∫–µ—Ä</span> –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞
                <span class="marker-blue">–≤–Ω–µ—à–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</span>,
                –∏ <span class="marker-yellow">–∂–µ–ª—Ç—ã–π –º–∞—Ä–∫–µ—Ä</span> –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–∏–º–µ—á–∞–Ω–∏–π.</p>
                
                <h3>–°–ø–∏—Å–æ–∫ —Å –ö—Ä–∞—Å–Ω—ã–º–∏ –ö—Ä—É–∂–æ—á–∫–∞–º–∏</h3>
                <ul class="custom-list list-circle-red">
                    <li>–ö—Ä–∞—Å–Ω—ã–π –º–∞—Ä–∫–µ—Ä –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –æ—à–∏–±–æ–∫.</li>
                    <li>–í—Ç–æ—Ä–æ–π –ø—É–Ω–∫—Ç —Å–ø–∏—Å–∫–∞.</li>
                </ul>

                <h3>–°–ø–∏—Å–æ–∫ —Å –§–∏–æ–ª–µ—Ç–æ–≤—ã–º–∏ –†–æ–º–±–∞–º–∏</h3>
                <ul class="custom-list list-diamond-purple">
                    <li>–§–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ä–æ–º–± –¥–ª—è –≤–∞–∂–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π.</li>
                    <li>–í—Ç–æ—Ä–æ–π –ø—É–Ω–∫—Ç —Å —Ä–æ–º–±–æ–º.</li>
                    <li>–¢—Ä–µ—Ç–∏–π –ø—É–Ω–∫—Ç.</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="status-message" id="statusMessage"></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
    <div class="modal" id="imageModal">
        <div class="modal-content">
            <h3>üñºÔ∏è –í—Å—Ç–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
            <input type="text" id="imageFileName" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: photo.jpg)">
            <p class="hint-text">üí° –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –ø–∞–ø–∫–∏ <strong>../images/</strong></p>
            <input type="text" id="imageAlt" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (alt text)">
            <p class="hint-text">–û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∏ SEO</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-ok" onclick="confirmImageInsert()">‚úÖ –í—Å—Ç–∞–≤–∏—Ç—å</button>
                <button class="modal-btn modal-btn-cancel" onclick="closeImageModal()">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã -->
    <div class="modal" id="tableModal">
        <div class="modal-content">
            <h3>üìä –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É</h3>
            <p class="hint-text">–í—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ —Ç–∞–±–ª–∏—Ü—É</p>
            
            <label style="display: block; margin-top: 15px; color: #2c3e50; font-weight: 600;">–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Å—Ç–æ–ª–±—Ü–æ–≤:</label>
            <select id="columnDelimiter" style="width: 100%; padding: 10px; margin-top: 5px; border: 2px solid #bdc3c7; border-radius: 5px;">
                <option value="\t">Tab (—Ç–∞–±—É–ª—è—Ü–∏—è)</option>
                <option value=",">–ó–∞–ø—è—Ç–∞—è (,)</option>
                <option value=";">–¢–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π (;)</option>
                <option value="|">–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è —á–µ—Ä—Ç–∞ (|)</option>
                <option value=" ">–ü—Ä–æ–±–µ–ª</option>
            </select>
            
            <label style="display: block; margin-top: 15px; color: #2c3e50; font-weight: 600;">–†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Å—Ç—Ä–æ–∫:</label>
            <select id="rowDelimiter" style="width: 100%; padding: 10px; margin-top: 5px; border: 2px solid #bdc3c7; border-radius: 5px;">
                <option value="\n">–ù–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞</option>
                <option value=".">–¢–æ—á–∫–∞ (.)</option>
                <option value=";">–¢–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π (;)</option>
            </select>
            
            <label style="display: block; margin-top: 15px;">
                <input type="checkbox" id="hasHeader" checked style="margin-right: 8px;">
                <span style="color: #2c3e50; font-weight: 600;">–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ - —ç—Ç–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫</span>
            </label>
            
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-ok" onclick="confirmTableConvert()">‚úÖ –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É</button>
                <button class="modal-btn modal-btn-cancel" onclick="closeTableModal()">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script>
        let currentFileName = '';
        let originalHtml = '';
        let history = [];
        let historyIndex = -1;
        const MAX_HISTORY = 50;

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –∏—Å—Ç–æ—Ä–∏—é
        function saveState() {
            const editor = document.getElementById('editorContent');
            const currentState = editor.innerHTML;
            
            // –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ—Å–ª–µ —Ç–µ–∫—É—â–µ–≥–æ –∏–Ω–¥–µ–∫—Å–∞ (–µ—Å–ª–∏ –º—ã –æ—Ç–∫–∞—Ç–∏–ª–∏—Å—å –Ω–∞–∑–∞–¥)
            history = history.slice(0, historyIndex + 1);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            history.push(currentState);
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –∏—Å—Ç–æ—Ä–∏–∏
            if (history.length > MAX_HISTORY) {
                history.shift();
            } else {
                historyIndex++;
            }
            
            updateHistoryUI();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –∏—Å—Ç–æ—Ä–∏–∏
        function updateHistoryUI() {
            const undoBtn = document.getElementById('undoBtn');
            const historyCount = document.getElementById('historyCount');
            
            if (historyIndex > 0) {
                undoBtn.style.opacity = '1';
                undoBtn.disabled = false;
            } else {
                undoBtn.style.opacity = '0.5';
                undoBtn.disabled = true;
            }
            
            historyCount.textContent = `–ò—Å—Ç–æ—Ä–∏—è: ${history.length} –¥–µ–π—Å—Ç–≤–∏–π`;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–º–µ–Ω—ã
        function undo() {
            if (historyIndex > 0) {
                historyIndex--;
                const editor = document.getElementById('editorContent');
                editor.innerHTML = history[historyIndex];
                updateHistoryUI();
                showStatus('‚Ü©Ô∏è –î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ');
            }
        }

        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
        let saveStateTimeout;
        document.getElementById('editorContent').addEventListener('input', function() {
            clearTimeout(saveStateTimeout);
            saveStateTimeout = setTimeout(() => {
                saveState();
            }, 500); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —á–µ—Ä–µ–∑ 500–º—Å –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
        });

        // –ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞ Ctrl+Z / Cmd+Z
        document.addEventListener('keydown', function(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'z' && !e.shiftKey) {
                e.preventDefault();
                undo();
            }
        });

        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            currentFileName = file.name;
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const content = e.target.result;
                originalHtml = content;
                
                const parser = new DOMParser();
                const doc = parser.parseFromString(content, 'text/html');
                const bodyContent = doc.body.innerHTML;
                
                document.getElementById('editorContent').innerHTML = bodyContent;
                document.getElementById('currentFile').textContent = currentFileName;
                showStatus('‚úÖ –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
                history = [bodyContent];
                historyIndex = 0;
                updateHistoryUI();
            };
            
            reader.readAsText(file);
        });

        // –î–ª—è inline-—Å—Ç–∏–ª–µ–π (span)
        function applyInlineStyle(className) {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.toString().trim() === '') {
                alert('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç!');
                return;
            }

            const range = selection.getRangeAt(0);
            const span = document.createElement('span');
            span.className = className;
            
            range.surroundContents(span);
            selection.removeAllRanges();
            
            saveState();
            showStatus(`‚ú® –ü—Ä–∏–º–µ–Ω–µ–Ω: ${className}`);
        }

        // –î–ª—è luminous blocks
        function applyLuminous(colorClass) {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.toString().trim() === '') {
                alert('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç!');
                return;
            }

            const range = selection.getRangeAt(0);
            const span = document.createElement('span');
            span.className = 'luminous-block ' + colorClass;
            
            range.surroundContents(span);
            selection.removeAllRanges();
            
            saveState();
            showStatus(`‚ú® Luminous: ${colorClass}`);
        }

        // –î–ª—è cyber neon
        function applyCyberNeon(colorClass) {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.toString().trim() === '') {
                alert('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç!');
                return;
            }

            const range = selection.getRangeAt(0);
            const span = document.createElement('span');
            span.className = 'cyber-neon ' + colorClass;
            
            range.surroundContents(span);
            selection.removeAllRanges();
            
            saveState();
            showStatus(`‚ö° Cyber Neon: ${colorClass}`);
        }

        // –î–ª—è cyber glitch
        function applyCyberGlitch() {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.toString().trim() === '') {
                alert('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç!');
                return;
            }

            const range = selection.getRangeAt(0);
            const text = selection.toString();
            const span = document.createElement('span');
            span.className = 'cyber-glitch';
            span.setAttribute('data-text', text);
            span.textContent = text;
            
            range.deleteContents();
            range.insertNode(span);
            selection.removeAllRanges();
            
            saveState();
            showStatus('‚ö° Glitch —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω!');
        }

        // –î–ª—è collapsible section
        function applyCollapsible() {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.toString().trim() === '') {
                alert('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç!\n\n–°–æ–≤–µ—Ç: –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Å—Ç–∞–Ω–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–º (summary), –æ—Å—Ç–∞–ª—å–Ω–æ–µ - —Å–æ–¥–µ—Ä–∂–∏–º—ã–º.');
                return;
            }

            const range = selection.getRangeAt(0);
            const text = selection.toString();
            const lines = text.split('\n');
            
            const summary = lines[0] || '–ó–∞–≥–æ–ª–æ–≤–æ–∫';
            const content = lines.slice(1).join('\n') || '–°–æ–¥–µ—Ä–∂–∏–º–æ–µ';
            
            const details = document.createElement('details');
            const summaryEl = document.createElement('summary');
            const h3 = document.createElement('h3');
            h3.textContent = summary;
            summaryEl.appendChild(h3);
            const p = document.createElement('p');
            p.textContent = content;
            
            details.appendChild(summaryEl);
            details.appendChild(p);
            
            range.deleteContents();
            range.insertNode(details);
            selection.removeAllRanges();
            
            saveState();
            showStatus('üìÇ Collapsible section —Å–æ–∑–¥–∞–Ω!');
        }

        // –î–ª—è —Ü–≤–µ—Ç–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
        function applyListStyle(className) {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.toString().trim() === '') {
                alert('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–ø–∏—Å–∫–∞!');
                return;
            }

            const range = selection.getRangeAt(0);
            const text = selection.toString();
            const lines = text.split('\n').filter(line => line.trim() !== '');
            
            const ul = document.createElement('ul');
            ul.className = className;
            
            lines.forEach(line => {
                const li = document.createElement('li');
                li.textContent = line.trim();
                ul.appendChild(li);
            });
            
            range.deleteContents();
            range.insertNode(ul);
            selection.removeAllRanges();
            
            saveState();
            showStatus(`üìã –ü—Ä–∏–º–µ–Ω–µ–Ω —Å—Ç–∏–ª—å —Å–ø–∏—Å–∫–∞: ${className}`);
        }

        // –î–ª—è info box
        function applyInfoBox(extraClass) {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.toString().trim() === '') {
                alert('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç!');
                return;
            }

            const range = selection.getRangeAt(0);
            const text = selection.toString();
            
            const div = document.createElement('div');
            div.className = extraClass ? 'info-box ' + extraClass : 'info-box';
            const p = document.createElement('p');
            p.textContent = text;
            div.appendChild(p);
            
            range.deleteContents();
            range.insertNode(div);
            selection.removeAllRanges();
            
            saveState();
            showStatus('üì¶ Info Box —Å–æ–∑–¥–∞–Ω!');
        }

        // –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞
        function applyTextColor(colorClass) {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.toString().trim() === '') {
                alert('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç!');
                return;
            }

            const range = selection.getRangeAt(0);
            const span = document.createElement('span');
            span.className = colorClass;
            
            range.surroundContents(span);
            selection.removeAllRanges();
            
            saveState();
            showStatus(`üé® –¶–≤–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω: ${colorClass}`);
        }

        // –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞
        function changeHeadingType(tagName) {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.toString().trim() === '') {
                alert('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç!');
                return;
            }

            const range = selection.getRangeAt(0);
            const selectedElement = range.commonAncestorContainer.parentElement;
            
            // –ï—Å–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç —É–∂–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏–ª–∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ, –º–µ–Ω—è–µ–º –µ–≥–æ
            if (selectedElement.tagName.toLowerCase() === 'h1' || 
                selectedElement.tagName.toLowerCase() === 'h2' || 
                selectedElement.tagName.toLowerCase() === 'h3' || 
                selectedElement.tagName.toLowerCase() === 'h4' || 
                selectedElement.tagName.toLowerCase() === 'h5' || 
                selectedElement.tagName.toLowerCase() === 'h6' || 
                selectedElement.tagName.toLowerCase() === 'p') {
                
                const newElement = document.createElement(tagName);
                newElement.innerHTML = selectedElement.innerHTML;
                newElement.style.color = selectedElement.style.color; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ü–≤–µ—Ç
                
                selectedElement.parentNode.replaceChild(newElement, selectedElement);
            } else {
                // –ï—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏–ª–∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ, –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º –≤ –Ω—É–∂–Ω—ã–π —Ç–µ–≥
                const newElement = document.createElement(tagName);
                newElement.appendChild(range.extractContents());
                range.insertNode(newElement);
            }
            
            selection.removeAllRanges();
            
            saveState();
            showStatus(`üè∑Ô∏è –¢–∏–ø —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞: ${tagName}`);
        }

        function saveFile() {
            if (!currentFileName) {
                const confirmed = confirm('‚ö†Ô∏è –§–∞–π–ª –Ω–µ –±—ã–ª –∑–∞–≥—Ä—É–∂–µ–Ω. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ "edited.html"?');
                if (!confirmed) return;
                currentFileName = 'edited.html';
            }

            const content = document.getElementById('editorContent').innerHTML;
            
            // –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –≤ div.table-wrapper
            let modifiedContent = content.replace(/<table\b([^>]*)>/gi, '<div class="table-wrapper"><table class="scenario-table"$1>');
            modifiedContent = modifiedContent.replace(/<\/table>/gi, '</table></div>');
            
            let fullHtml;
            if (originalHtml) {
                const parser = new DOMParser();
                const doc = parser.parseFromString(originalHtml, 'text/html');
                doc.body.innerHTML = modifiedContent;
                
                // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏–∑ head, –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫—É –Ω–∞ main.css
                const existingStyles = doc.querySelectorAll('style');
                existingStyles.forEach(style => style.remove());
                
                if (!doc.querySelector('link[href*="main.css"]')) {
                    const link = doc.createElement('link');
                    link.rel = 'stylesheet';
                    link.href = '../main.css';
                    doc.head.appendChild(link);
                }
                
                fullHtml = '<!DOCTYPE html>\n' + doc.documentElement.outerHTML;
            } else {
                fullHtml = `<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edited Page</title>
    <link rel="stylesheet" href="../main.css">
</head>
<body>
${modifiedContent}
</body>
</html>`;
            }
            
            const blob = new Blob([fullHtml], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = currentFileName;
            a.click();
            URL.revokeObjectURL(url);
            
            showStatus('üíæ –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω: ' + currentFileName);
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function insertImage() {
            document.getElementById('imageModal').style.display = 'flex';
            document.getElementById('imageFileName').focus();
        }

        function closeImageModal() {
            document.getElementById('imageModal').style.display = 'none';
            document.getElementById('imageFileName').value = '';
            document.getElementById('imageAlt').value = '';
        }

        function confirmImageInsert() {
            const fileName = document.getElementById('imageFileName').value.trim();
            
            if (!fileName) {
                alert('‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞!');
                return;
            }

            const altText = document.getElementById('imageAlt').value.trim() || fileName;
            const imagePath = '../images/' + fileName;
            
            const editor = document.getElementById('editorContent');
            const selection = window.getSelection();
            
            const img = document.createElement('img');
            img.src = imagePath;
            img.alt = altText;
            img.style.maxWidth = '100%';
            img.style.height = 'auto';
            
            // –í—Å—Ç–∞–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            if (selection.rangeCount > 0) {
                try {
                    const range = selection.getRangeAt(0);
                    range.deleteContents();
                    
                    // –°–æ–∑–¥–∞–µ–º –æ–±–µ—Ä—Ç–∫—É –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                    const wrapper = document.createElement('div');
                    wrapper.appendChild(img);
                    wrapper.appendChild(document.createElement('br'));
                    
                    range.insertNode(wrapper);
                    
                    // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫—É—Ä—Å–æ—Ä –ø–æ—Å–ª–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                    range.setStartAfter(wrapper);
                    range.collapse(true);
                    selection.removeAllRanges();
                    selection.addRange(range);
                } catch (e) {
                    // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –≤—Å—Ç–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ range, –¥–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω–µ—Ü
                    editor.appendChild(img);
                    editor.appendChild(document.createElement('br'));
                }
            } else {
                editor.appendChild(img);
                editor.appendChild(document.createElement('br'));
            }
            
            closeImageModal();
            saveState();
            showStatus('üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ: ' + fileName);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
        document.getElementById('imageFileName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                confirmImageInsert();
            }
        });

        document.getElementById('imageAlt').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                confirmImageInsert();
            }
        });

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏
        let selectedTextForTable = '';
        let tableRange = null;

        function convertToTable() {
            const selection = window.getSelection();
            if (!selection.rangeCount || selection.toString().trim() === '') {
                alert('‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ –≤—ã–¥–µ–ª–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å –¥–∞–Ω–Ω—ã–º–∏!');
                return;
            }

            selectedTextForTable = selection.toString();
            tableRange = selection.getRangeAt(0);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å
            const text = selectedTextForTable;
            if (text.includes('\t')) {
                document.getElementById('columnDelimiter').value = '\t';
            } else if (text.includes('|')) {
                document.getElementById('columnDelimiter').value = '|';
            } else if (text.includes(',')) {
                document.getElementById('columnDelimiter').value = ',';
            }
            
            document.getElementById('tableModal').style.display = 'flex';
        }

        function closeTableModal() {
            document.getElementById('tableModal').style.display = 'none';
            selectedTextForTable = '';
            tableRange = null;
        }

        function confirmTableConvert() {
            if (!selectedTextForTable || !tableRange) {
                alert('‚ö†Ô∏è –û—à–∏–±–∫–∞: —Ç–µ–∫—Å—Ç –Ω–µ –≤—ã–¥–µ–ª–µ–Ω!');
                return;
            }

            const columnDelim = document.getElementById('columnDelimiter').value.replace('\\t', '\t').replace('\\n', '\n');
            const rowDelim = document.getElementById('rowDelimiter').value.replace('\\n', '\n');
            const hasHeader = document.getElementById('hasHeader').checked;

            // –†–∞–∑–±–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –∏ —Å—Ç–æ–ª–±—Ü—ã
            const rows = selectedTextForTable.split(rowDelim).map(r => r.trim()).filter(r => r);
            
            if (rows.length === 0) {
                alert('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞–∑–æ–±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏.');
                return;
            }

            // –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—É
            const table = document.createElement('table');
            
            rows.forEach((rowText, rowIndex) => {
                const cells = rowText.split(columnDelim).map(c => c.trim());
                const row = document.createElement('tr');
                
                cells.forEach(cellText => {
                    let cell;
                    if (rowIndex === 0 && hasHeader) {
                        cell = document.createElement('th');
                    } else {
                        cell = document.createElement('td');
                    }
                    cell.textContent = cellText;
                    row.appendChild(cell);
                });
                
                table.appendChild(row);
            });

            // –í—Å—Ç–∞–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—É
            tableRange.deleteContents();
            tableRange.insertNode(table);
            
            window.getSelection().removeAllRanges();
            closeTableModal();
            saveState();
            showStatus('üìä –¢–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞!');
        }

        function showStatus(message) {
            const status = document.getElementById('statusMessage');
            status.textContent = message;
            status.style.display = 'block';
            
            setTimeout(() => {
                status.style.display = 'none';
            }, 3000);
        }
    </script>
</body>
</html>